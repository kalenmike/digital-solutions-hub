import{d as ke,Z as $e,o as m,c as $,b as ie,y as I,Q as ne,q as s,P as ge,J as me,$ as he,x as fe,a0 as be,a1 as Ne,a2 as xe,a3 as ze,T as oe,e as ue,g as T,z as p,I as de,a4 as qe,M as A,A as k,a5 as Ie,B as L,a6 as ce,a7 as we,r as ae,a8 as Se,a9 as Be,w as Fe,h as Ve,k as te,N as re,Y as G,aa as je,ab as Me,n as Ae,ac as ve,ad as ye,ae as Ce,G as pe,af as le,ag as Oe,ah as Te,ai as De,aj as Re,ak as Pe}from"./3o7LUD9r.js";var Ke=ke({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(i){const r=i;return $e(),(o,a)=>(m(),$(s(ge),ne(r,{onMousedown:a[0]||(a[0]=n=>{!n.defaultPrevented&&n.detail>1&&n.preventDefault()})}),{default:ie(()=>[I(o.$slots,"default")]),_:3},16))}}),We=Ke;const Ge={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Le=["id","type","value","name","placeholder","disabled","required","autocomplete"],oa=Object.assign({inheritAttrs:!1},{__name:"UInput",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1}},emits:["update:modelValue","blur","change"],setup(i,{expose:r,emit:o}){const a=i,n=o,y=me(),c=he(a,"modelValue",n,{defaultValue:a.defaultValue}),g=fe(),{emitFormBlur:q,emitFormInput:B,emitFormChange:h,size:N,color:O,id:v,name:D,highlight:R,disabled:H,emitFormFocus:P,ariaAttrs:J}=be(a,{deferInputValidation:!0}),{orientation:V,size:Q}=Ne(a),{isLeading:F,isTrailing:w,leadingIconName:b,trailingIconName:x}=xe(a),Y=k(()=>Q.value||N.value),z=k(()=>L({extend:L(Ge),...g.ui?.input||{}})({type:a.type,color:O.value,variant:a.variant,size:Y?.value,loading:a.loading,highlight:R.value,leading:F.value||!!a.avatar||!!y.leading,trailing:w.value||!!y.trailing,fieldGroup:V.value})),U=ze("inputRef");function Z(d){a.modelModifiers?.trim&&(d=d?.trim()??null),(a.modelModifiers?.number||a.type==="number")&&(d=Ie(d)),a.modelModifiers?.nullable&&(d||=null),a.modelModifiers?.optional&&(d||=void 0),c.value=d,B()}function X(d){a.modelModifiers?.lazy||Z(d.target.value)}function K(d){const j=d.target.value;a.modelModifiers?.lazy&&Z(j),a.modelModifiers?.trim&&(d.target.value=j.trim()),h(),n("change",d)}function u(d){q(),n("blur",d)}function S(){a.autofocus&&U.value?.focus()}return oe(()=>{setTimeout(()=>{S()},a.autofocusDelay)}),r({inputRef:U}),(d,j)=>(m(),$(s(ge),{as:i.as,"data-slot":"root",class:p(z.value.root({class:[a.ui?.root,a.class]}))},{default:ie(()=>[ue("input",ne({id:s(v),ref_key:"inputRef",ref:U,type:i.type,value:s(c),name:s(D),placeholder:i.placeholder,"data-slot":"base",class:z.value.base({class:a.ui?.base}),disabled:s(H),required:i.required,autocomplete:i.autocomplete},{...d.$attrs,...s(J)},{onInput:X,onBlur:u,onChange:K,onFocus:j[0]||(j[0]=(..._)=>s(P)&&s(P)(..._))}),null,16,Le),I(d.$slots,"default",{ui:z.value}),s(F)||i.avatar||y.leading?(m(),T("span",{key:0,"data-slot":"leading",class:p(z.value.leading({class:a.ui?.leading}))},[I(d.$slots,"leading",{ui:z.value},()=>[s(F)&&s(b)?(m(),$(de,{key:0,name:s(b),"data-slot":"leadingIcon",class:p(z.value.leadingIcon({class:a.ui?.leadingIcon}))},null,8,["name","class"])):i.avatar?(m(),$(qe,ne({key:1,size:a.ui?.leadingAvatarSize||z.value.leadingAvatarSize()},i.avatar,{"data-slot":"leadingAvatar",class:z.value.leadingAvatar({class:a.ui?.leadingAvatar})}),null,16,["size","class"])):A("",!0)])],2)):A("",!0),s(w)||y.trailing?(m(),T("span",{key:1,"data-slot":"trailing",class:p(z.value.trailing({class:a.ui?.trailing}))},[I(d.$slots,"trailing",{ui:z.value},()=>[s(x)?(m(),$(de,{key:0,name:s(x),"data-slot":"trailingIcon",class:p(z.value.trailingIcon({class:a.ui?.trailingIcon}))},null,8,["name","class"])):A("",!0)])],2)):A("",!0)]),_:3},8,["as","class"]))}}),Ue={slots:{root:"",wrapper:"",labelWrapper:"flex content-center items-center justify-between gap-1",label:"block font-medium text-default",container:"relative",description:"text-muted",error:"mt-2 text-error",hint:"text-muted",help:"mt-2 text-muted"},variants:{size:{xs:{root:"text-xs"},sm:{root:"text-xs"},md:{root:"text-sm"},lg:{root:"text-sm"},xl:{root:"text-base"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-error"}},orientation:{vertical:{container:"mt-1"},horizontal:{root:"flex justify-between place-items-baseline gap-2"}}},defaultVariants:{size:"md",orientation:"vertical"}},He=["id"],Je=["id"],Qe=["id"],Ye=["id"],ua={__name:"UFormField",props:{as:{type:null,required:!1},name:{type:String,required:!1},errorPattern:{type:null,required:!1},label:{type:String,required:!1},description:{type:String,required:!1},help:{type:String,required:!1},error:{type:[Boolean,String],required:!1,default:void 0},hint:{type:String,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},eagerValidation:{type:Boolean,required:!1},validateOnInputDelay:{type:Number,required:!1},orientation:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(i){const r=i,o=me(),a=fe(),n=k(()=>L({extend:L(Ue),...a.ui?.formField||{}})({size:r.size,required:r.required,orientation:r.orientation})),y=ce(we,null),c=k(()=>r.error||y?.value?.find(h=>h.name===r.name||r.errorPattern&&h.name?.match(r.errorPattern))?.message),g=ae(Se()),q=g.value,B=ce(Be,void 0);return Fe(g,()=>{B&&r.name&&(B.value[r.name]={id:g.value,pattern:r.errorPattern})},{immediate:!0}),G(je,g),G(Me,k(()=>({error:c.value,name:r.name,size:r.size,eagerValidation:r.eagerValidation,validateOnInputDelay:r.validateOnInputDelay,errorPattern:r.errorPattern,hint:r.hint,description:r.description,help:r.help,ariaId:q}))),(h,N)=>(m(),$(s(ge),{as:i.as,"data-orientation":i.orientation,"data-slot":"root",class:p(n.value.root({class:[r.ui?.root,r.class]}))},{default:ie(()=>[ue("div",{"data-slot":"wrapper",class:p(n.value.wrapper({class:r.ui?.wrapper}))},[i.label||o.label?(m(),T("div",{key:0,"data-slot":"labelWrapper",class:p(n.value.labelWrapper({class:r.ui?.labelWrapper}))},[Ve(s(We),{for:g.value,"data-slot":"label",class:p(n.value.label({class:r.ui?.label}))},{default:ie(()=>[I(h.$slots,"label",{label:i.label},()=>[te(re(i.label),1)])]),_:3},8,["for","class"]),i.hint||o.hint?(m(),T("span",{key:0,id:`${s(q)}-hint`,"data-slot":"hint",class:p(n.value.hint({class:r.ui?.hint}))},[I(h.$slots,"hint",{hint:i.hint},()=>[te(re(i.hint),1)])],10,He)):A("",!0)],2)):A("",!0),i.description||o.description?(m(),T("p",{key:1,id:`${s(q)}-description`,"data-slot":"description",class:p(n.value.description({class:r.ui?.description}))},[I(h.$slots,"description",{description:i.description},()=>[te(re(i.description),1)])],10,Je)):A("",!0)],2),ue("div",{class:p([(i.label||!!o.label||i.description||!!o.description)&&n.value.container({class:r.ui?.container})])},[I(h.$slots,"default",{error:c.value}),r.error!==!1&&(typeof c.value=="string"&&c.value||o.error)?(m(),T("div",{key:0,id:`${s(q)}-error`,"data-slot":"error",class:p(n.value.error({class:r.ui?.error}))},[I(h.$slots,"error",{error:c.value},()=>[te(re(c.value),1)])],10,Qe)):i.help||o.help?(m(),T("div",{key:1,id:`${s(q)}-help`,"data-slot":"help",class:p(n.value.help({class:r.ui?.help}))},[I(h.$slots,"help",{help:i.help},()=>[te(re(i.help),1)])],10,Ye)):A("",!0)],2)]),_:3},8,["as","data-orientation","class"]))}},Ze={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 appearance-none placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute start-0 flex items-start",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute end-0 flex items-start",trailingIcon:"shrink-0 text-dimmed"},variants:{fieldGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2 inset-y-1",trailing:"pe-2 inset-y-1",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5 inset-y-1.5",trailing:"pe-2.5 inset-y-1.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3 inset-y-2",trailing:"pe-3 inset-y-2",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"},autoresize:{true:{base:"resize-none"}}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},Xe=["id","value","name","rows","placeholder","disabled","required"],da=Object.assign({inheritAttrs:!1},{__name:"UTextarea",props:{as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},autoresize:{type:Boolean,required:!1},autoresizeDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},rows:{type:Number,required:!1,default:3},maxrows:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},modelModifiers:{type:Object,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:null,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:null,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:null,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:null,required:!1}},emits:["update:modelValue","blur","change"],setup(i,{expose:r,emit:o}){const a=i,n=o,y=me(),c=he(a,"modelValue",n,{defaultValue:a.defaultValue}),g=fe(),{emitFormFocus:q,emitFormBlur:B,emitFormInput:h,emitFormChange:N,size:O,color:v,id:D,name:R,highlight:H,disabled:P,ariaAttrs:J}=be(a,{deferInputValidation:!0}),{isLeading:V,isTrailing:Q,leadingIconName:F,trailingIconName:w}=xe(a),b=k(()=>L({extend:L(Ze),...g.ui?.textarea||{}})({color:v.value,variant:a.variant,size:O?.value,loading:a.loading,highlight:H.value,autoresize:a.autoresize,leading:V.value||!!a.avatar||!!y.leading,trailing:Q.value||!!y.trailing})),x=ze("textareaRef");function Y(u){a.modelModifiers?.trim&&(u=u?.trim()??null),a.modelModifiers?.number&&(u=Ie(u)),a.modelModifiers?.nullable&&(u||=null),a.modelModifiers?.optional&&(u||=void 0),c.value=u,h()}function z(u){K(),a.modelModifiers?.lazy||Y(u.target.value)}function U(u){const S=u.target.value;a.modelModifiers?.lazy&&Y(S),a.modelModifiers?.trim&&(u.target.value=S.trim()),N(),n("change",u)}function Z(u){B(),n("blur",u)}function X(){a.autofocus&&x.value?.focus()}function K(){if(a.autoresize&&x.value){x.value.rows=a.rows;const u=x.value.style.overflow;x.value.style.overflow="hidden";const S=window.getComputedStyle(x.value),d=Number.parseInt(S.paddingTop),j=Number.parseInt(S.paddingBottom),_=d+j,e=Number.parseInt(S.lineHeight),{scrollHeight:t}=x.value,l=(t-_)/e;l>a.rows&&(x.value.rows=a.maxrows?Math.min(l,a.maxrows):l),x.value.style.overflow=u}}return Fe(c,()=>{Ae(K)}),oe(()=>{setTimeout(()=>{X()},a.autofocusDelay),setTimeout(()=>{K()},a.autoresizeDelay)}),r({textareaRef:x}),(u,S)=>(m(),$(s(ge),{as:i.as,"data-slot":"root",class:p(b.value.root({class:[a.ui?.root,a.class]}))},{default:ie(()=>[ue("textarea",ne({id:s(D),ref_key:"textareaRef",ref:x,value:s(c),name:s(R),rows:i.rows,placeholder:i.placeholder,"data-slot":"base",class:b.value.base({class:a.ui?.base}),disabled:s(P),required:i.required},{...u.$attrs,...s(J)},{onInput:z,onBlur:Z,onChange:U,onFocus:S[0]||(S[0]=(...d)=>s(q)&&s(q)(...d))}),null,16,Xe),I(u.$slots,"default",{ui:b.value}),s(V)||i.avatar||y.leading?(m(),T("span",{key:0,"data-slot":"leading",class:p(b.value.leading({class:a.ui?.leading}))},[I(u.$slots,"leading",{ui:b.value},()=>[s(V)&&s(F)?(m(),$(de,{key:0,name:s(F),"data-slot":"leadingIcon",class:p(b.value.leadingIcon({class:a.ui?.leadingIcon}))},null,8,["name","class"])):i.avatar?(m(),$(qe,ne({key:1,size:a.ui?.leadingAvatarSize||b.value.leadingAvatarSize()},i.avatar,{"data-slot":"leadingAvatar",class:b.value.leadingAvatar({class:a.ui?.leadingAvatar})}),null,16,["size","class"])):A("",!0)])],2)):A("",!0),s(Q)||y.trailing?(m(),T("span",{key:1,"data-slot":"trailing",class:p(b.value.trailing({class:a.ui?.trailing}))},[I(u.$slots,"trailing",{ui:b.value},()=>[s(w)?(m(),$(de,{key:0,name:s(w),"data-slot":"trailingIcon",class:p(b.value.trailingIcon({class:a.ui?.trailingIcon}))},null,8,["name","class"])):A("",!0)])],2)):A("",!0)]),_:3},8,["as","class"]))}});function _e(i){return"schema"in i&&typeof i.coercer=="function"&&typeof i.validator=="function"&&typeof i.refiner=="function"}function ea(i){return"~standard"in i}async function aa(i,r){const o=await r["~standard"].validate(i);return o.issues?{errors:o.issues?.map(a=>({name:a.path?.map(n=>typeof n=="object"?n.key:n).join(".")||"",message:a.message}))||[],result:null}:{errors:null,result:o.value}}async function ia(i,r){const[o,a]=r.validate(i);return o?{errors:o.failures().map(y=>({message:y.message,name:y.path.join(".")})),result:null}:{errors:null,result:a}}function ta(i,r){if(ea(r))return aa(i,r);if(_e(r))return ia(i,r);throw new Error("Form validation failed: Unsupported form schema")}function ra(i,r){return r?r.split(".").reduce((a,n)=>a?.[n],i):i}function sa(i,r,o){if(!r)return Object.assign(i,o);if(!i)return i;const a=r.split(".");let n=i;for(let c=0;c<a.length-1;c++){const g=a[c];(n[g]===void 0||n[g]===null)&&(c+1<a.length&&!Number.isNaN(Number(a[c+1]))?n[g]=[]:n[g]={}),n=n[g]}const y=a[a.length-1];return n[y]=o,i}class se extends Error{formId;errors;constructor(r,o){super("Form validation exception"),this.formId=r,this.errors=o,Object.setPrototypeOf(this,se.prototype)}}const na={base:""},ca={__name:"UForm",props:{id:{type:[String,Number],required:!1},schema:{type:null,required:!1},state:{type:null,required:!1},validate:{type:Function,required:!1},validateOn:{type:Array,required:!1,default(){return["input","blur","change"]}},disabled:{type:Boolean,required:!1},name:{type:null,required:!1},validateOnInputDelay:{type:Number,required:!1,default:300},transform:{type:null,required:!1,default:()=>!0},nested:{type:Boolean,required:!1},loadingAuto:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},onSubmit:{type:Function,required:!1}},emits:["submit","error"],setup(i,{expose:r,emit:o}){const a=i,n=o,y=fe(),c=k(()=>L({extend:L(na),...y.ui?.form||{}})),g=a.id??Se(),q=De(`form-${g}`),B=a.nested===!0&&ce(ve,void 0),h=a.nested===!0?ce(ye,void 0):void 0,N=k(()=>h?.value?a.name?ra(h.value,a.name):h.value:a.state);G(ve,q),G(ye,N);const O=ae(new Map);oe(async()=>{B&&(await Ae(),B.emit({type:"attach",validate:F,formId:g,name:a.name,api:_}))}),Ce(()=>{q.reset(),B&&B.emit({type:"detach",formId:g})}),oe(async()=>{q.on(async e=>{e.type==="attach"?O.value.set(e.formId,{validate:e.validate,name:e.name,api:e.api}):e.type==="detach"?O.value.delete(e.formId):a.validateOn?.includes(e.type)&&!w.value&&(e.type!=="input"?await F({name:e.name,silent:!0,nested:!1}):(e.eager||P.has(e.name))&&await F({name:e.name,silent:!0,nested:!1})),e.type==="blur"&&P.add(e.name),(e.type==="change"||e.type==="input"||e.type==="blur"||e.type==="focus")&&H.add(e.name),(e.type==="change"||e.type==="input")&&R.add(e.name)})});const v=ae([]);G(we,v);const D=ae({});G(Be,D);const R=pe(new Set),H=pe(new Set),P=pe(new Set);function J(e){return e.map(t=>({...t,id:t?.name?D.value[t.name]?.id:void 0}))}const V=ae(null);async function Q(){let e=a.validate?await a.validate(N.value)??[]:[];if(a.schema){const{errors:t,result:l}=await ta(N.value,a.schema);t?e=e.concat(t):V.value=l}return J(e)}async function F(e={silent:!1,nested:!1,transform:!1}){const t=e.name&&!Array.isArray(e.name)?[e.name]:e.name;let l=[],f=[];if(!t&&e.nested){const W=Array.from(O.value.values()).map(C=>Y(C,e)),M=await Promise.all(W);f=M.filter(C=>C.error).flatMap(C=>C.error.errors.map(Ee=>z(Ee,C.name))),l=M.filter(C=>C.output!==void 0)}const ee=[...await Q(),...f];if(t?v.value=S(ee,t):v.value=ee,v.value?.length){if(e.silent)return!1;throw new se(g,v.value)}return e.transform?(l.forEach(W=>{W.name?sa(V.value,W.name,W.output):Object.assign(V.value,W.output)}),V.value??N.value):N.value}const w=ae(!1);G(Re,le(w));async function b(e){w.value=a.loadingAuto&&!0;const t=e;try{t.data=await F({nested:!0,transform:a.transform}),await a.onSubmit?.(t),R.clear()}catch(l){if(!(l instanceof se))throw l;const f={...t,errors:l.errors};n("error",f)}finally{w.value=!1}}const x=k(()=>a.disabled||w.value);G(Pe,k(()=>({disabled:x.value,validateOnInputDelay:a.validateOnInputDelay})));async function Y(e,t){try{const l=await e.validate({...t,silent:!1});return{name:e.name,output:l}}catch(l){if(!(l instanceof se))throw l;return{name:e.name,error:l}}}function z(e,t){return!t||!e.name?e:{...e,name:t+"."+e.name}}function U(e,t){const l=t+".",f=e?.name?.startsWith(l)?e.name.substring(l.length):e.name;return{...e,name:f}}function Z(e,t){return t?e.filter(l=>l?.name?.startsWith(t+".")).map(l=>U(l,t)):e}function X(e){return e.api.getErrors().map(t=>e.name?{...t,name:e.name+"."+t.name}:t)}function K(e,t){return!e||!t?!0:e instanceof RegExp?e.test(t):t===e||typeof e=="string"&&e.startsWith(t+".")}function u(e,t){if(!e||e instanceof RegExp)return e;if(t!==e)return typeof e=="string"&&e.startsWith(t+".")?e.substring(t.length+1):e}function S(e,t){const l=new Set(t),f=t.map(M=>D.value?.[M]?.pattern).filter(Boolean),E=M=>M.name?l.has(M.name)?!0:f.some(C=>C.test(M.name)):!1,ee=v.value.filter(M=>!E(M)),W=e.filter(E);return[...ee,...W]}function d(e,t){return e.filter(l=>t instanceof RegExp?!(l.name&&t.test(l.name)):!l.name||l.name!==t)}function j(e){return!e.name||!!D.value[e.name]}const _={validate:F,errors:v,setErrors(e,t){const l=J(e.filter(j)),f=[];for(const E of O.value.values())if(K(t,E.name)){const ee=Z(e,E.name);E.api.setErrors(ee,u(t,E.name||"")),f.push(...X(E))}if(t){const E=d(v.value,t);v.value=[...E,...l,...f]}else v.value=[...l,...f]},async submit(){await b(new Event("submit"))},getErrors(e){return e?v.value.filter(t=>e instanceof RegExp?t.name&&e.test(t.name):t.name===e):v.value},clear(e){const t=e?v.value.filter(f=>j(f)&&(e instanceof RegExp?!(f.name&&e.test(f.name)):f.name!==e)):[],l=[];for(const f of O.value.values())K(e,f.name)&&f.api.clear(),l.push(...X(f));v.value=[...t,...l]},disabled:x,loading:w,dirty:k(()=>!!R.size),dirtyFields:le(R),blurredFields:le(P),touchedFields:le(H)};return r(_),(e,t)=>(m(),$(Te(s(B)?"div":"form"),{id:s(g),class:p(c.value({class:a.class})),onSubmit:Oe(b,["prevent"])},{default:ie(()=>[I(e.$slots,"default",{errors:v.value,loading:w.value})]),_:3},40,["id","class"]))}};export{ca as _,oa as a,ua as b,da as c};
